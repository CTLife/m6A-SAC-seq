#!/usr/bin/env  perl
use  strict;
use  warnings;
use  v5.12;
## Perl5 version >= 5.12
## Suffixes of all self-defined global variables must be "_g".
###################################################################################################################################################################################################





###################################################################################################################################################################################################
say   "\n\n\n\n\n\n##################################################################################################";
say   "Running ......";

sub myMakeDir  {
    my $path = $_[0];
    if ( !( -e $path) )  { system("mkdir  -p  $path"); }
    if ( !( -e $path) )  { mkdir $path  ||  die;       }
}
my $output_g = "6-format";
&myMakeDir($output_g);

my $input_g = "3-fit";
opendir(my $FH_input1_g, $input_g)  ||  die;
my @files1 = readdir($FH_input1_g);
###################################################################################################################################################################################################




 
###################################################################################################################################################################################################
open(C1, ">",  "$output_g/spikeins.fit.txt" ) or die;

for(my $i=0; $i<=$#files1; $i=$i+1) {
        my $temp1 = $files1[$i];
        next unless $temp1 =~ m/^[AGCT]{5}$/;
        my $file = "$input_g/$temp1/Regression.log.txt";

        open(A1, "<",  $file ) or die;
        my @lines_A1 = <A1>; 

        for(my $j=0; $j<=$#lines_A1; $j=$j+1) {
              if( $lines_A1[$j] =~ m/^\s*\(Intercept\)\s+xAxis2\s+$/ ) {
                    $lines_A1[$j+1] =~ m/^\s*([e\.\-\d]+)\s+([e\.\-\d]+)\s+$/ or die  "##$lines_A1[$j+1]##\n";
                    my $Intercept = $1; 
                    my $xAxis2 = $2; 
                    print C1 "$temp1\t$xAxis2\t$Intercept\n";
              }
        }
        
}

###################################################################################################################################################################################################






say   "Done ......";






#####
