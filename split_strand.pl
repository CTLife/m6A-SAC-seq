#!/usr/bin/env  perl
use  strict;
use  warnings;
use  v5.12;
## Perl5 version >= 5.12
## Suffixes of all self-defined global variables must be "_g".
###################################################################################################################################################################################################



my $input1="6-finalBAM.A/3_STAR";
my $out1="callVariants_STAR.A/1-Split-strand/plus_strand";
my $out2="callVariants_STAR.A/1-Split-strand/minus_strand";


###################################################################################################################################################################################################
say   "\n\n\n\n\n\n##################################################################################################";
say   "Running ......";

sub myMakeDir  {
    my $path = $_[0];
    if ( !( -e $path) )  { system("mkdir  -p  $path"); }
    if ( !( -e $path) )  { mkdir $path  ||  die;       }
}
&myMakeDir($out1);
&myMakeDir($out2);
opendir(my $FH_input1_g, $input1)  ||  die;
my @files = readdir($FH_input1_g);
###################################################################################################################################################################################################



 
        
###################################################################################################################################################################################################

for(my $i=0; $i<=$#files; $i=$i+1) {
        my $temp = $files[$i];
        next unless $temp =~ m/\.bam$/;
        print "$temp\n";
        system("samtools view -F 0x10   -o  $out1/$temp    --output-fmt  bam  $input1/$temp ");       
        system("samtools view -f 0x10   -o  $out2/$temp    --output-fmt  bam  $input1/$temp ");
}

###################################################################################################################################################################################################






say   "Done ......";






#####
